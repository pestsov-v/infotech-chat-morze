# Архитектура

Приложение построено по архитектуре монолита.

## Оглавление 
- [Архитектура](#архитектура)
	- [Оглавление](#оглавление)
	- [Root folder](#root-folder)
	- [Source folder](#source-folder)
	- [API folder](#api-folder)
		- [Auth folder](#auth-folder)
		- [Message folder](#message-folder)
		- [User folder](#user-folder)
	- [CLI folder](#cli-folder)
	- [Core folder](#core-folder)
	- [Documentation folder](#documentation-folder)
	- [GUI folder](#gui-folder)
		- [Public](#public)

## Root folder

[![architecture-root.png](https://i.postimg.cc/L6SkRGgT/architecture-root.png)](https://postimg.cc/xqsN3xRJ)

Которая состоит из директорий:
- `сonfig` - директория в которой находятся приватные переменные соответствующих режимов запусков приложения.
- `src` - директория с кодом приложения.

Файлов:

- `.gitattributes`, `.gitignore` - служебные файлы работы с `GitHub`.
- `jest.config.ts` - файл конфигурация работы фреймворка тестирования - `jest`.
- `LICENSE` - лицензия.
- `package-lock.json` - служебный файл, который отвечает за последующую установку непосредственно тех версий NPM пакетов, какие используются на моей собственной хост машине при запуске данного приложения.
- `package.json` - служебный файл, который хранит внутренние данные приложения и список пакетов, для подключения в `development` или `production` режиме.
- `README.md` - инструкция по работе с приложением.
- `tsconfig.json` - служебный файл подключения `TypeScript` с особенностями его реализации.

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)

## Source folder

[![image.png](https://i.postimg.cc/NjBw6G9H/image.png)](https://postimg.cc/ppG7xHBW)

Которая состоит из директорий:
- `api` - директория с различными API сущностями. 
- `cli` - директория с описанием интерфейсом командной строки. 
- `core` - директория с подключением базовыми сущностями приложения, а также различными данными, которые проходят "красной" ниткой по всей рубашке приложения.
- `documentation` - директория со swagger документацией.
- `gui` - директория с описанием Front-end части приложения. 

И файла `app.ts` - входной точки в приложение, в котором инициализируются сервер, база данных и интерфейс командной строки.

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)

## API folder

[![architecture-src-api.png](https://i.postimg.cc/D0SzKvdZ/architecture-src-api.png)](https://postimg.cc/sGRzYRLd)

Которая состоит из директорий:
- `auth` - директория со всеми файлами реализации авторизации пользователя. Подробнее про реализацию авторизации смотрите [Auth Folder](#api-folder)
- `message` - директория со всеми файлами реализации работы с сущностью сообщений. Подробнее про работу с сообщениями смотрите [Message Folder](#message-folder)
- `user` - директория со всеми файлами реализации работы с сущностью пользователя. Подробнее про работу с пользователями смотрите [User Folder](#user-folder)

И файлами:
- `api.model.enum.ts` - унификатор названий моделей сущностей.
- `api.router.path.ts` - API пути маршрутизации доступа.
- `api.router.ts` - маршрутизатор, в который подключается маршрутизаторы различных сущностей API с присвоением соответствующего пути маршрутизации.

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)

### Auth folder

[![architecture-src-api-auth.png](https://i.postimg.cc/tCrLxdjL/architecture-src-api-auth.png)](https://postimg.cc/WhkWRktn)

Которая состоит из директорий:
- `dto` - директория с интерфейсами описывающие интерфейсы входных данных, которые приходят с объектом запроса `req` по соответствующему маршруту.
- `interface` - директория с интерфейсами описывающие классы авторизации.
- `response` - директория с интерфейсами описывающие результаты выполнения различных методов определённых классов авторизации.

И также следующих файлов:
- `auth.constants.ts` - файл с константами, которые используются в классах авторизации.
- `auth.controller.ts` - класс контроллер, задача которого принять данные из объекта запроса `req` и передать его на обработку различных классам авторизации, после чего отправить данные в объект ответа `res`.
- `auth.cookier.ts` - класс работы с куками.
- `auth.exception.ts` - класс работы с исключениями для обработки пользовательских ошибок, например введения не всех обязательных данных для регистрации и т.д.
- `auth.hasher.ts` - класс хеширования для работы с зашифрованными данными, например паролями.
- `auth.middleware.ts` - класс промежуточного обработчика, в котором описаны методы промежуточных обработчиков авторизации. Такими промежуточными обработчиками есть обработчик авторизации, который даёт доступ к определенным ресурсам API только авторизованным пользователям.
- `auth.responser.ts` - класс формирующий ответы, которые отдаются в класс контроллера для последующей отправки клиенту.
- `auth.router.path.ts` - файл с описанием путей под каждый определенный метод класса контроллера авторизации.
- `auth.router.ts` - маршрутизатор авторизации, в котором описывается путь маршрутизации и функция обратного вызова - соответствующий метод класса контроллера.
- `auth.service.ts` - класс сервиса, который работает исключительно с базой данных пользователя. 
- `auth.tokenizer.ts` - класс токенов, который отвечает за работу с JWT токенами.
- `auth.validator.ts` - класс валидации, который отвечает за обработку ответов авторизации в интерфейсе командной строки.

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)

### Message folder

[![architecture-src-api-message.png](https://i.postimg.cc/y8xXDc1p/architecture-src-api-message.png)](https://postimg.cc/rD6tbdt5)

Которая состоит из директорий:
- `dto` - директория с интерфейсами описывающие интерфейсы входных данных, которые приходят с объектом запроса `req` по соответствующему маршруту.
- `interface` - директория с интерфейсами описывающие классы работы с сообщениями.
- `response` - директория с интерфейсами описывающие результаты выполнения различных методов определённых классов работы с сообщениями.
- `type` - директория с файлами описание различных типов данных.

И также следующих файлов:
- `message.constants.ts` - файл с константами, которые используются в классах работы с сообщениями.
- `message.controller.ts` - класс контроллер, задача которого принять данные из объекта запроса `req` и передать его на обработку различных классам работы с сообщениями, после чего отправить данные в объект ответа `res`.
- `message.decoder.ts` - класс кодирования, которые переводит текст языка морзе на английский и наоборот - с английского на язык морзе.
- `message.dictionary.ts` - класс словарей, в котором описан перевод каждого символа с английского на язык морзе.
- `message.exception.ts` - класс работы с исключениями для обработки пользовательских ошибок, например введения не верного имени пользователя и т.д.
- `message.helper.ts` - класс помощник, который реализует логику не относящуюся к другим, целевым, классам.
- `message.model.ts` - модель сущности сообщения.
- `message.responser.ts` - класс формирующий ответы, который отдаются в класс контроллера для последующей отправки клиенту.
- `message.router.path.ts` - файл с описанием путей под каждый определенный метод класса контроллера сообщений.
- `message.router.ts` - маршрутизатор сообщений, в котором описывается путь маршрутизации и функция обратного вызова - соответствующий метод класса контроллера.
- `message.service.ts` - класс сервиса, который работает исключительно с базой данных сообщений. 

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)

### User folder

[![architecture-src-api-user.png](https://i.postimg.cc/4yTRdXpw/architecture-src-api-user.png)](https://postimg.cc/1nMj7hCN)

Которая состоит из директорий:
- `enum` - директория с перечислениями, к примеру перечисления ролей пользователя.
- `interface` - директория с интерфейсами описывающие классы работы с пользователями.
- `response` - директория с интерфейсами описывающие результаты выполнения различных методов определённых классов работы с пользователями.
- `tests` - директория с файлами тестирования различных конечных путей API работы с сущностью пользователей.

И также следующих файлов:
- `user.constants.ts` - файл с константами, которые используются в классах работы с пользователями.
- `user.controller.ts` - класс контроллер, задача которого принять данные из объекта запроса `req` и передать его на обработку различных классам работы с пользователями, после чего отправить данные в объект ответа `res`.
- `user.exception.ts` - класс работы с исключениями для обработки пользовательских ошибок, например введения не верного username пользователя и т.д.
- `user.model.ts` - модель сущности пользователя.
- `user.responser.ts` - класс формирующий ответы, который отдаются в класс контроллера для последующей отправки клиенту.
- `user.router.path.ts` - файл с описанием путей под каждый определенный метод класса контроллера пользователей.
- `user.router.ts` - маршрутизатор пользователей, в котором описывается путь маршрутизации и функция обратного вызова - соответствующий метод класса контроллера.
- `user.service.ts` - класс сервиса, который работает исключительно с базой данных пользователей. 

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)

## CLI folder

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)

## Core folder

[![architecture-src-core.png](https://i.postimg.cc/yxq383f5/architecture-src-core.png)](https://postimg.cc/gXD2Mjbq)

Которая состоит из следующих директорий и вложенных файлах:
- `connection` - директория с файлами подключения базовых сущностей.
  - `cli.connection.ts` - класс подключения интерфейса командной строки.
  - `db.connection.ts` - класс подключения к базе данных.
  - `https.connection.ts` - класс описывающий ключ и сертификат для создания подключения к https протоколу. 
  - `server.connection.ts` - класс экземпляра сервера.
  - `session.connection.ts` - класс создания сессии. 
  - `swagger.connection.ts` - класс описывающий методы подключения Swagger документации.
- `dto` - директория с файлами описание интерфейсом входящих данных.
  -  `exeption.dto.ts` - интерфейс исключений одинаков для исключений любых типов, поэтому является базовым. 
  -  `session.dto.ts` - интерфейс дополнения интерфейса сессии - `Session` из NPM пакета `express-session`.
- `enum` - директория с файлами перечислений, которые используются по всему приложению.
  - `color.enum.ts` - файл с перечислением цветов. Используется для вывода сообщений в консоли, а также в интерфейсе командной строки.
  - `emodji.enum.ts` - файл с перечислением смайликов. Используется для вывода смайликов в консоли или в интерфейсе командной строки.
  - `status.enum.ts` - файл с перечислениями статусов. Эти статусы используются в объекте ответа `res`, а также на основании статуса `success` или `fail` определяются выполнение запроса.
  - `statusCode.enum.ts` - файл с перечислениями http кодов ответа сервера. Эти коды используются для отправки верного http кода с ответом запроса `res`.
- `https` - директория с файлами создания подключения к https протоколу.
  - `cert.pem` - файл с сертификатом.
  - `key.pem` - файл с ключом доступа.
- `tester` - директория с файлами подключения тестов.
  - `app.tester.ts` - файл с подключением к экземпляру приложения.
  - `db.tester.ts` - файл с экземпляром подключением к базе данных.
  - `init.tester.ts` - файл собирающий экземпляры в одну область.

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)

## Documentation folder

[![architecture-src-doc.png](https://i.postimg.cc/9M85J7kk/architecture-src-doc.png)](https://postimg.cc/vgVNmcb7)

Поскольку API маленькое, то и было принято решение вбить всё, в один файл. В другом же случае в данной директории были бы поддиректории с соответствующим описанием отдельных модулей, таких как `auth`, `message`, `user` и т.д.

API является открытым и доступ к нему можно получить по следующей ссылке:

[![gui-doc-link.png](https://i.postimg.cc/X7w30pBr/gui-doc-link.png)](https://postimg.cc/ZCKX8Ycm)

А сама документация представляет собой:

[![gui-doc-page.png](https://i.postimg.cc/13BQf2HP/gui-doc-page.png)](https://postimg.cc/NKKVnNSP)

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)

## GUI folder

[![architecture-src-gui.png](https://i.postimg.cc/vTrKCx2M/architecture-src-gui.png)](https://postimg.cc/xNdgz8SF)

Которая состоит из директорий:
- `public` - директория с файлами `css` и `js`. Подробнее смотрите [Public](#public)
- `response` - директория с интерфейсами ответов статических данных, которые отдаются на рендер вместе с файлом отрисовки.
- `temlates` - директория с файлами отрисовки.
  - `partials` -

И также из файлов:
- `gui.base.ts` - 
- `gui.controller.ts` - 
- `gui.middleware.ts` - 
- `gui.page.ts` - 
- `gui.payload.interface.ts` - 
- `gui.payloader.ts` - 
- `gui.router.path.ts` - 
- `gui.router.ts` - 

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)

### Public

➡️ [Вернутся к оглавлению](#оглавление) </br>
➡️ [Вернутся на главную](../README.md#приложения-для-общения-на-языке-морзе)