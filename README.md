# Приложения для общения на языке морзе.

Приложение для отправки и получения сообщений, которые написаны с помощью азбуки морзе с откытым исходным кодом и API документацией.
Чтобы отправить соо 

## Оглавление
- [Приложения для общения на языке морзе.](#приложения-для-общения-на-языке-морзе)
	- [Оглавление](#оглавление)
	- [Задачи и их реализация](#задачи-и-их-реализация)
		- [Задача](#задача)
		- [Особенности реализации задачи](#особенности-реализации-задачи)
		- [Допольнительные задачи](#допольнительные-задачи)
	- [Стэк технологий](#стэк-технологий)
	- [Архитектура](#архитектура)
	- [Как читать код](#как-читать-код)
		- [Входная точка в приложение](#входная-точка-в-приложение)
		- [Server](#server)
			- [Файлы отрисовки pug](#файлы-отрисовки-pug)
			- [Session](#session)
			- [Swagger документация](#swagger-документация)
			- [Application programm interface (API)](#application-programm-interface-api)
		- [Database](#database)
		- [CLI](#cli)
	- [Applacation programming interface (API)](#applacation-programming-interface-api)
	- [Command line interface (CLI)](#command-line-interface-cli)
	- [Graphical user interface (GUI)](#graphical-user-interface-gui)
	- [Тестирование](#тестирование)

## Задачи и их реализация

### Задача

Написать веб-сервер и клиент для общения азбукой морзе.

### Особенности реализации задачи

Особенности реализации задачи:
- Сообщения в клиент вводятся **как с помощью обычного текста, так и с помощью азбуки морзе**, отображаются же в виде сообщений форматированных азбуков морзе. (текст написанный только символами: "-" и ".").
- Общение возможно только между двумя пользователями.
- Общение возможно только между авторизированными пользователями.
- Для отправки сообщения в клиенте нужно указать имя получателя и сообщение.
- Сервер не хранит историю переписки, **а только сообщения, которые отправлены непосредственно конкретному пользователю.**

### Допольнительные задачи 
- Если у пользователя чата роль "newby" - у пользователя есть возможность раскодирования сообщения на сервере для отображения в клиенте.
- Функционал для управления пользователями (добавить / забантиь / удалить)

## Стэк технологий

В приложении задействованы следующие куски разработки или же типы технологий:

| Направленность разработки или тип технологии | Название технологии | Применение |
| :----------: | :-----------------: | :------------- |
| Язык программирования | TypeScript | Back-end и CLI |
| Язык программирования | JavaScript | Front-end он же GUI |
| Фреймворк | Express.js | Back-end |
| База данных | mongoose | NPM модуль для работы с MongoDB |
| Авторизация | jsonwebtoken | Реализация JWT токенов для опознавания пользователя |
| Сессии | connect-mongo / express-session | Реализация хранилища сессий с помощью MongoStore |
| Шаблонизатор | pug | Отрисовка HTML-страничек для Front-end |
| Связь между Back-end и Front-end | axios | Создание запросов для обмена данными между сервером и веб-клиентом |
| Шифрование | bcrypt | Реализация шифрования пароля пользователя |
| Сокрытие приватных переменных | config | Сокрытие приватных переменных для разных режимов работы (development или testing) приложения |
| CLI | Inquirer | Реализация интерфейсов коммандной строки |
| Тесты | ts-jest / supertest / mongodb-memory-server | Подключение тестирования и end-to-end тесты |
| Документация | swagger / swagger-ui-express / yamljs | Подключение и описание Swagger документации |

## Архитектура

Приложенение построено на архитектуре монолита. 

## Как читать код

### Входная точка в приложение

файл `app.ts` является точной входа в приложение. В нём инициализуруются классы: 
- `Server` - отвечает за работу всего сервера.
- `Database` - отвечает за подключение базы данных.
- `CLI` - отвечает за работу Command Line Interface. Класс обёрнут в setTimeout для запуска CLI после запуска `Server` и `Database` на следующем витке event loop.

Каждый класс находится в папке `src/core/connection`...собственно там находятся и все остальные подключения.

### Server

В конструкторе класса реализован `app` - результат выполнения функции `express`, после чего в объект `app` записываются все составные компоненты сервера:
- инициализация шаблонизатора `pug` и указание пути к файлам отрисовки.
- инициализация `session`
- иницализация `http` и `https` серверов.
- подключение `swagger` документации.
- присоединения маршрутов `api`, маршрутов файлов отрисовки `pug` и подключение swagger документации.

#### Файлы отрисовки pug

Реализация Front-end'а построена на подключении файлов отрисовки `pug`, статический файлов, который выполняют роль:
- выполнения запросов и получение данных на фронт с помощью `JavaScript`.
- обработка и подключение стилей - файлов `css`.

Подробнее про архитектуру и реализацию Front-end смотрите [GUI](#graphical-user-interface-gui)

#### Session

Сессия реализован в отдельном классе `Session` и подключается из другого файла: `session.connection.ts`. По своей сути представляет отдельный объект подключения к `session` из `express-session`, которая использует в роли хранилища - `MongoStore`.

#### Swagger документация

Swagger подключение описывается отдельным классом Swagger, внутри которого описываются следующие методы:
- подключения файла `yaml` с описанием документации.
- реализации настроек NPM пакета `swagger-ui-express`.
- маршрута по коротому можно получить страницу документации. 

#### Application programm interface (API)

REST API организован по директориям с отдельными сущностями:
- AUTH - API авторизации пользователя.
- MESSAGE - API управления сообщениями.
- USER - API управления пользователями.

Также API имеет общие файлы конфигурации API:
- `api.model.enum.ts` - унификатор названий моделей сущностей.
- `api.router.path.ts` - API пути машрутизации доступа.
- `api.router.ts` - машрутизатор, в который подключается машрутизаторы различных сущностей API и которым присваивется соответствующий путь маршрутизации.

Подробнее про архитектуру и релаизацию API, а также цепочку машрутизации смотрите [API](#applacation-programming-interface-api)

### Database

В конструкторе реализована функция - connection к базе данных, которая является `Promise` и результатом выполнения которой будет или успешное подключение или ошибочное с выбрасыванием ошибки подключения.

### CLI



## Applacation programming interface (API)

## Command line interface (CLI)

## Graphical user interface (GUI)

## Тестирование

